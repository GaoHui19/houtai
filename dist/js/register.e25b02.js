(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{665:function(t,e,a){},666:function(t,e,a){},763:function(t,e,a){"use strict";var r=a(665);a.n(r).a},764:function(t,e,a){"use strict";var r=a(666);a.n(r).a},853:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return i}));var r=a(40),n=a.n(r),o=a(76),c=a.n(o),s={data:function(){var t=this;return{registerLoading:!1,captchaLoading:!1,captchaButtonText:"获取验证码",accountInfo:{username:"",password:"",checkPassword:"",phone:"",captcha:""},accountRules:{username:[{required:!0,message:"账号不能为空",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:function(e,a,r){""===a?r(new Error("请输入密码")):/\d/.test(a)&&/[a-zA-Z]/.test(a)?(""!==t.accountInfo.checkPassword&&t.$refs.form.validateField("checkPassword"),r()):r(new Error("密码至少要包含数字和字母"))},trigger:"blur"},{min:6,max:20,message:"密码长度为6~20位",trigger:"blur"}],checkPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:function(e,a,r){""===a?r(new Error("请再次输入密码")):a!==t.accountInfo.password?r(new Error("两次填写的密码不一致")):r()},trigger:"blur"}],phone:[{required:!0,message:"请填写手机号",trigger:"blur"},{pattern:/^1[345789]\d{9}$/,message:"手机号码格式不正确",trigger:"blur"}],captcha:[{required:!0,message:"请填写验证码",trigger:"blur"}]}}},methods:{setDefaultCaptchaButton:function(t){clearInterval(t),this.captchaLoading=!1,this.captchaButtonText="获取验证码"},validPhone:function(t){return!!t.match(/^1[345789]\d{9}$/)||(this.$message.error("请填写正确的手机号！"),!1)},getCaptcha:function(){var t=this;return c()(n.a.mark((function e(){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.validPhone(t.accountInfo.phone)){e.next=2;break}return e.abrupt("return");case 2:return t.captchaLoading=!0,a=60,r=null,r=setInterval((function(){--a>0?t.captchaButtonText="获取验证码("+a+"s)":t.setDefaultCaptchaButton(r)}),1e3),e.next=8,t.$api.account.getCaptcha({phone:t.accountInfo.phone});case 8:t.$message.success("验证码已发送至手机"+t.accountInfo.phone+"，请注意查收！");case 9:case"end":return e.stop()}}),e,t)})))()},handleRegister:function(){var t,e=this;this.registerLoading=!0,this.$refs.form.validate((t=c()(n.a.mark((function t(a){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=10;break}return t.next=3,e.$api.account.register(e.accountInfo);case 3:return e.$message.success("注册成功！"),t.next=6,e.$store.dispatch("login",{username:e.accountInfo.username,password:e.accountInfo.password});case 6:e.$router.replace("/"),e.registerLoading=!1,t.next=12;break;case 10:e.$message.warning("请按正确格式填写信息"),e.registerLoading=!1;case 12:case"end":return t.stop()}}),t,e)}))),function(e){return t.apply(this,arguments)}))}}},u=(a(763),a(764),a(10)),i=Object(u.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"register"},[a("p",{staticClass:"register__header"},[t._v("账号注册")]),t._v(" "),a("el-form",{ref:"form",staticClass:"register__body",attrs:{model:t.accountInfo,rules:t.accountRules,"auto-complete":"on","label-width":"80px"}},[a("el-form-item",{attrs:{label:"账号",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入账号"},model:{value:t.accountInfo.username,callback:function(e){t.$set(t.accountInfo,"username",e)},expression:"accountInfo.username"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.accountInfo.password,callback:function(e){t.$set(t.accountInfo,"password",e)},expression:"accountInfo.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPassword"}},[a("el-input",{attrs:{type:"password",placeholder:"请再次输入密码"},model:{value:t.accountInfo.checkPassword,callback:function(e){t.$set(t.accountInfo,"checkPassword",e)},expression:"accountInfo.checkPassword"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请填写手机号码"},model:{value:t.accountInfo.phone,callback:function(e){t.$set(t.accountInfo,"phone",e)},expression:"accountInfo.phone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"验证码",prop:"captcha"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入短信验证码"},model:{value:t.accountInfo.captcha,callback:function(e){t.$set(t.accountInfo,"captcha",e)},expression:"accountInfo.captcha"}})],1),t._v(" "),a("el-col",{attrs:{span:10,offset:2}},[a("el-button",{staticStyle:{width:"100%"},attrs:{disabled:t.captchaLoading},on:{click:t.getCaptcha}},[t._v("\n\t\t\t\t\t\t"+t._s(t.captchaButtonText)+"\n\t\t\t\t\t")])],1)],1)],1),t._v(" "),a("el-form-item",[a("el-col",{attrs:{span:11}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:t.registerLoading},on:{click:t.handleRegister}},[t._v("\n\t\t\t\t\t注册\n\t\t\t\t")])],1),t._v(" "),a("el-col",{attrs:{span:11,offset:2}},[a("router-link",{attrs:{to:"/account/login"}},[t._v("使用已有账号登录")])],1)],1)],1)],1)}),[],!1,null,"798e7772",null).exports}}]);